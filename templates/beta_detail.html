{% extends "base.html" %}

{% block content %}

    <a href="{{ url_for('betas') }}">Back to All Betas</a>
    <hr>

    <h1>{{ beta.name }}</h1>
    <h2>Grade: {{ beta.grade }}</h2>
    <p><strong>Location:</strong> {{ beta.location }}</p>
    <p><strong>Created by:</strong> <a href="{{ url_for('profile', username=beta.author.username) }}">{{ beta.author.username }}</a></p>

    <img src="{{ url_for('static', filename='uploads/' + beta.image_file) }}" alt="Photo of {{ beta.name }}">
    <hr>
    <div>
        <p>{{ beta.likers.count() }} Likes</p>
        {% if current_user.is_authenticated %}
            {% if beta in current_user.liked_betas %}
                <a href="{{ url_for('unlike_beta', beta_id=beta.id) }}" role="button" class="secondary">Unlike</a>
            {% else %}
                <a href="{{ url_for('like_beta', beta_id=beta.id) }}" role="button">Like</a>
            {% endif %}
        {% endif %}
    </div>

    {% if beta.author == current_user %}
    <hr>
    <div>
        <a href="{{ url_for('edit_beta', beta_id=beta.id) }}">Edit Beta</a>
        
        <form action="{{ url_for('delete_beta', beta_id=beta.id) }}" method="POST" style="display:inline; margin-left: 15px;">
            <input type="submit" value="Delete Beta" onclick="return confirm('Are you sure you want to delete this beta?');">
        </form>
    </div>
    {% endif %}

    {% if beta.description %}
    <article>
        <p>{{ beta.description }}</p>
    </article>
    {% endif %}
    
{% endblock %}